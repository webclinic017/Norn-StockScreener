(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"3RSX":function(e,t,r){"use strict";var n=r("Qfp6");e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},"50AU":function(e,t,r){e.exports={container:"marketCorrelationMatrix-module--container--Xm37f",matrixColTitle:"marketCorrelationMatrix-module--matrixColTitle--2Xiij",matrixRowTitle:"marketCorrelationMatrix-module--matrixRowTitle--2Yamv",matrixNodeFirstRow:"marketCorrelationMatrix-module--matrixNodeFirstRow--3-Qv7",matrixNodeFirstColumn:"marketCorrelationMatrix-module--matrixNodeFirstColumn--1iHHg",matrixNode:"marketCorrelationMatrix-module--matrixNode--2o4fm"}},"5R+2":function(e,t){e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*n*r/t.length),o="";;)for(var i=e(a),l=a;l--;)if((o+=t[i[l]&n]||"").length===+r)return o}},Bpvx:function(e,t,r){"use strict";var n=r("Qfp6"),a=r("Pfkr"),o=r("3RSX"),i=r("n8Jw")||0;function l(){return a(i)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return i=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=o},CR0S:function(e,t,r){"use strict";r("PF2M"),r("IZzc");var n,a="object"==typeof window&&(window.crypto||window.msCrypto);n=a&&a.getRandomValues?function(e){return a.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=n},JSnC:function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),a=r.n(n),o=r("w8ma"),i=r("Bl7J"),l=r("HaE+"),c=r("KQm4"),u=r("o0o1"),s=r.n(u),m=(r("E9XD"),r("V3n9")),f=r("tAME"),p=r("hGmu"),d=r("G43+"),h=r("je4i"),g=r.n(h),v=r("tFdz"),b=r("jJ2d"),x=r("/1FI"),w=r("ps87"),y=r("4cdY"),E=r("y9N3"),S=r("J+eN"),k=r("b+jq"),j=r("nJDY"),M=r("Yjvw"),R=r("wcMh"),O=r("wd/R"),N=r.n(O),C=function(e){var t=e.data,r=e.description;return a.a.createElement("div",{style:{width:window.innerWidth-100+"px",height:window.innerHeight-100+"px",maxWidth:"1200px",maxHeight:"600px"}},a.a.createElement(w.a,{width:"100%",height:"100%"},a.a.createElement(y.a,{data:t,margin:{top:5,right:30,left:20,bottom:5}},a.a.createElement(E.a,{strokeDasharray:"3 3"}),a.a.createElement(S.a,{dataKey:"Date",tickFormatter:function(e){return N()(e).format("MM/DD/YYYY")}}),a.a.createElement(k.a,{domain:[-1,1]}),a.a.createElement(j.a,null),a.a.createElement(M.a,null),a.a.createElement(R.a,{type:"monotone",name:r,dataKey:"Score",stroke:"#8884d8",dot:!1}))))},D=r("50AU"),F=r.n(D),T=function(e){return e.map((function(e){return{symbol:e.symbol,src:e.src}}))},Y=function(e){var t=T(e);return t.reduce((function(r,n){var a=e.find((function(e){return e.symbol===n.symbol})),o=t.reduce((function(e,r){var o,i,l=a.correlations[r.symbol].value,u=a.correlations[r.symbol].p_value,s=a.dataUrl,m=t.findIndex((function(e){return e.symbol==n.symbol})),f=t.findIndex((function(e){return e.symbol==r.symbol})),p=l<0?(o=l,i=Math.abs(o),"rgba(243, 87, 86, "+(isNaN(i)?0:i)+")"):function(e){var t=Math.abs(e);return"rgba(46, 233, 255, "+(isNaN(t)?0:t)+")"}(l);return[].concat(Object(c.a)(e),[{colSymbolSrc:r,rowSymbolSrc:n,row:m,column:f,value:l,pValue:u,dataUrl:s,color:p}])}),[]);return[].concat(Object(c.a)(r),Object(c.a)(o))}),[])},I=function(e){var t=e.data,r=e.popperTipRef,n=e.modalWindowRef,o=F.a.matrixNode;0===t.row&&(o+=" "+F.a.matrixNodeFirstRow),0===t.column&&(o+=" "+F.a.matrixNodeFirstColumn);var i=t.colSymbolSrc.symbol+" has a "+t.value+" correlation to "+t.rowSymbolSrc.symbol+"\np-value: "+t.pValue+"\n",c=Object(v.a)({cachePolicy:"no-cache"}),u=Object(v.a)({cachePolicy:"no-cache"});return a.a.createElement("div",{className:o},a.a.createElement("div",{style:{background:t.color},onMouseOver:function(e){r.current.setOpen(!0,e.currentTarget,i)},onMouseOut:function(){r.current.setOpen(!1)},onClick:function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(t,r,n){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(t+"_"+r).match(/\w+/gi).join("_")+".json",e.next=3,n.get("/norn-data/markets/"+a);case 3:if(o=e.sent,!(n.response.ok&&o.data&&o.data.length>0)){e.next=8;break}return e.abrupt("return",o.data);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();Promise.all([e(t.colSymbolSrc.src,t.colSymbolSrc.symbol,c),e(t.rowSymbolSrc.src,t.rowSymbolSrc.symbol,u)]).then((function(e){2===e.length&&null!==e[0]&&null!==e[1]?function(){for(var r,o,i=function(e){var t,r,n,a={},o=(t=e[0].Date,r=e[1].Date,n=15,Date.parse(t)-Date.parse(r)>24*n*60*60*1e3);return e.forEach((function(e,t){var r=e.Close;if("string"==typeof r&&(r=parseFloat(r.replace("%",""))),o){var n=Date.parse(e.Date),i=(n.getMonth()+1).toString().padStart(2,"0")+"/01/"+n.getFullYear().toString();a[i]=r}else a[e.Date]=r})),a},l=i(e[0]),c=i(e[1]),u=(r=l,o=c,Object.keys(r).filter({}.hasOwnProperty.bind(o))),s=2,m=Date.parse(u[u.length-1])+24*x.s*60*60*1e3,f=u.length-2;f>=0;f--)if(m<=Date.parse(u[f])){s=Math.max(s,u.length-1-f+1);break}for(var p=[],d=function(e){var t=[],r=[];u.slice(e,e+s).forEach((function(e){t.push(l[e]),r.push(c[e])}));var n,a,o,i,m,f,d,h,g=(a=r,o=0,i=0,m=0,f=0,d=0,h=(n=t).length=a.length=Math.min(n.length,a.length),n.forEach((function(e,t){var r=a[t];o+=e,i+=r,m+=e*r,f+=e*e,d+=r*r})),(h*m-o*i)/Math.sqrt((h*f-o*o)*(h*d-i*i)));p.push({Date:u[e],Score:g})},h=u.length-1-s+1;h>=0;h--)d(h);var g=t.rowSymbolSrc.symbol+" - "+t.colSymbolSrc.symbol+" Rolling "+x.s+" days Correlation";n.current.popModalWindow(a.a.createElement(C,{data:p,description:g}))}():n.current.popModalWindow(a.a.createElement("div",null,"Load some market data failed"))})).catch((function(){n.current.popModalWindow(a.a.createElement("div",null,"Can't draw rolling correlation chart for these market data"))}))}},"NaN"===t.value?"NaN":t.value.toFixed(2).replace(/(\.0*|(?<=(\..*))0*)$/,"").replace("0.",".")))},P=function(e){e.popperTipRef.current={setOpen:function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=""),e&&(c(t),m(r)),o(e)},getOpen:function(){return r}};var t=Object(n.useState)(!1),r=t[0],o=t[1],i=Object(n.useState)(null),l=i[0],c=i[1],u=Object(n.useState)(""),s=u[0],m=u[1];return a.a.createElement(f.a,{open:r,anchorEl:l,transition:!0},(function(e){var t=e.TransitionProps;return a.a.createElement(p.a,Object.assign({},t,{timeout:350}),a.a.createElement(d.a,{style:{padding:"10px"}},a.a.createElement("span",{style:{whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},s)))}))},W=function(e){var t,r=e.loadingAnimeRef,o=Object(n.useRef)({popModalWindow:null,popPureModal:null}),i=Object(n.useRef)({setOpen:null,getOpen:null}),c=Object(n.useState)([]),u=c[0],f=c[1],p=Object(v.a)({cachePolicy:"no-cache"}),d=p.get,h=p.response,x=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/norn-data/market-correlation-matrix.json");case 2:t=e.sent,h.ok?(console.log(t),f(t.table)):(o.current.popModalWindow(a.a.createElement("div",null,"Load market-correlation-matrix.json failed")),f([])),r.current.setLoading(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return x(),function(){}}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:F.a.container},a.a.createElement("div",{style:{display:"grid",justifyItems:"center",alignItems:"center",gridTemplateColumns:"200px "+"40px ".repeat(T(u).length)}},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:F.a.matrixColTitle,key:g.a.generate()}),T(u).map((function(e){return a.a.createElement("div",{className:F.a.matrixColTitle,key:g.a.generate()},e.symbol)}))),(t=[],Y(u).forEach((function(e,r){r%u.length==0&&t.push(a.a.createElement("div",{className:F.a.matrixRowTitle,key:g.a.generate()},a.a.createElement(m.a,{href:e.dataUrl,target:"_blank",rel:"noreferrer noopener"},a.a.createElement("span",null,e.rowSymbolSrc.symbol)))),t.push(a.a.createElement(I,{data:e,popperTipRef:i,modalWindowRef:o,key:g.a.generate()}))})),t))),a.a.createElement(P,{popperTipRef:i}),a.a.createElement(b.a,{modalWindowRef:o}))},J=r("3Y3G"),V=r("vrFN");t.default=function(){var e=Object(n.useRef)({getLoading:null,setLoading:null});return a.a.createElement(o.a,{injectFirst:!0},a.a.createElement(V.a,null),a.a.createElement(i.a,null,a.a.createElement(W,{loadingAnimeRef:e})),a.a.createElement(J.a,{loadingAnimeRef:e}))}},Pfkr:function(e,t,r){"use strict";var n,a,o=r("vZIR");r("Qfp6");e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1567752802062));return r===a?n++:(n=0,a=r),t+=o(7),t+=o(e),n>0&&(t+=o(n)),t+=o(r)}},Qfp6:function(e,t,r){"use strict";var n,a,o,i=r("fqyn"),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){o=!1}function u(e){if(e){if(e!==n){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,c()}}else n!==l&&(n=l,c())}function s(){return o||(o=function(){n||u(l);for(var e,t=n.split(""),r=[],a=i.nextValue();t.length>0;)a=i.nextValue(),e=Math.floor(a*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||l},characters:function(e){return u(e),n},seed:function(e){i.seed(e),a!==e&&(c(),a=e)},lookup:function(e){return s()[e]},shuffled:s}},fqyn:function(e,t,r){"use strict";var n=1;e.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(e){n=e}}},je4i:function(e,t,r){"use strict";e.exports=r("Bpvx")},n8Jw:function(e,t,r){"use strict";e.exports=0},vZIR:function(e,t,r){"use strict";var n=r("Qfp6"),a=r("CR0S"),o=r("5R+2");e.exports=function(e){for(var t,r=0,i="";!t;)i+=o(a,n.get(),1),t=e<Math.pow(16,r+1),r++;return i}}}]);
//# sourceMappingURL=component---src-pages-market-correlation-matrix-js-985769fc96e0ec1ac8c2.js.map